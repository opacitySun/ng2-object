<div class="insure-confirm">
    <div nz-row [nzGutter]="data.contentGutter" class="page-layout-content">
        <div nz-col nzXs="24" nzLg="12" [nzOffset]="data.nzOffset" class="page-layout-content--left">
            <div nz-row>
                <div nz-col [nzSpan]="24">
                    <!--头部介绍-->
                    <div class="page-layout-header" nz-row>
                        <h1 nz-col [nzSpan]="24">保单详情</h1>
                        <!-- <small nz-col [nzSpan]="24">车辆在获取车辆合格证及发票后即可购买保险。您可提前选择保险方案，查看金额。</small> -->
                    </div>
                </div>
            </div>

            <!-- <div nz-row>
                <div 
                    nz-col 
                    [nzSpan]="24" 
                    class="page-history-btn"
                    [hidden]="!data.historyBtnVisible"
                    (click)="data.historyModalVisible = true"
                >查看已存保险方案</div>
            </div> -->

            <div nz-row>
                <div nz-col [nzSpan]="24" class="page-title">车辆信息</div>
                <div nz-col [nzSpan]="24" class="page-info">
                    <div nz-row [nzGutter]="24" class="page-info-box">
                        <div nz-col nzXs="10" nzLg="4" class="page-info-txt">被保车辆：</div>
                        <div nz-col nzXs="14" nzLg="20" class="page-info-txt">{{data.carInfo.model}}</div>
                    </div>
                    <div nz-row [nzGutter]="24" class="page-info-box">
                        <div nz-col nzXs="10" nzLg="4" class="page-info-txt">车辆价格：</div>
                        <div nz-col nzXs="14" nzLg="20" class="page-info-txt">￥{{!!data.carInfo.price?utils.formatMoney(data.carInfo.price, 2):''}}</div>
                    </div>
                    <div nz-row [nzGutter]="24" class="page-info-box" *ngIf="!!data.carInfo.vinNo">
                        <div nz-col nzXs="10" nzLg="4" class="page-info-txt">车架号：</div>
                        <div nz-col nzXs="14" nzLg="20" class="page-info-txt">{{data.carInfo.vinNo}}</div>
                    </div>
                </div>
            </div>

            <div nz-row *ngIf="data.businessType == 1">
                <div nz-col [nzSpan]="24" class="page-title">车主信息</div>
                <div nz-col [nzSpan]="24" class="page-info">
                    <div nz-row [nzGutter]="24" class="page-info-box">
                        <div nz-col nzXs="10" nzLg="4" class="page-info-txt">姓名：</div>
                        <div nz-col nzXs="14" nzLg="20" class="page-info-txt">{{data.ownerInfo.name}}</div>
                    </div>
                    <div nz-row [nzGutter]="24" class="page-info-box" *ngIf="!!data.ownerInfo.nation">
                        <div nz-col nzXs="10" nzLg="4" class="page-info-txt">民族：</div>
                        <div nz-col nzXs="14" nzLg="20" class="page-info-txt">{{data.ownerInfo.nation}}</div>
                    </div>
                    <div nz-row [nzGutter]="24" class="page-info-box">
                        <div nz-col nzXs="10" nzLg="4" class="page-info-txt">手机号码：</div>
                        <div nz-col nzXs="14" nzLg="20" class="page-info-txt">{{data.ownerInfo.phone}}</div>
                    </div>
                    <div nz-row [nzGutter]="24" class="page-info-box">
                        <div nz-col nzXs="10" nzLg="4" class="page-info-txt">电子邮箱：</div>
                        <div nz-col nzXs="14" nzLg="20" class="page-info-txt">{{data.ownerInfo.email}}</div>
                    </div>
                    <div nz-row [nzGutter]="24" class="page-info-box">
                        <div nz-col nzXs="10" nzLg="4" class="page-info-txt">身份证号码：</div>
                        <div nz-col nzXs="14" nzLg="20" class="page-info-txt">{{data.ownerInfo.idNo}}</div>
                    </div>
                    <div nz-row [nzGutter]="24" class="page-info-box" *ngIf="!!data.ownerInfo.idStartDate">
                        <div nz-col nzXs="10" nzLg="4" class="page-info-txt">证件有效起期：</div>
                        <div nz-col nzXs="14" nzLg="20" class="page-info-txt">{{data.ownerInfo.idStartDate}}</div>
                    </div>
                    <div nz-row [nzGutter]="24" class="page-info-box" *ngIf="!!data.ownerInfo.idEndDate">
                        <div nz-col nzXs="10" nzLg="4" class="page-info-txt">证件有效止期：</div>
                        <div nz-col nzXs="14" nzLg="20" class="page-info-txt">{{data.ownerInfo.idEndDate}}</div>
                    </div>
                    <div nz-row [nzGutter]="24" class="page-info-box" *ngIf="!!data.ownerInfo.institution">
                        <div nz-col nzXs="10" nzLg="4" class="page-info-txt">签发机构：</div>
                        <div nz-col nzXs="14" nzLg="20" class="page-info-txt">{{data.ownerInfo.institution}}</div>
                    </div>
                    <div nz-row [nzGutter]="24" class="page-info-box" *ngIf="!!data.ownerInfo.address">
                        <div nz-col nzXs="10" nzLg="4" class="page-info-txt">投保人地址：</div>
                        <div nz-col nzXs="14" nzLg="20" class="page-info-txt">{{data.ownerInfo.address}}</div>
                    </div>
                </div>
            </div>

            <div nz-row *ngIf="data.businessType == 1">
                <div nz-col [nzSpan]="24" class="page-title">投保信息</div>
                <div nz-col [nzSpan]="24" class="page-info">
                    <div nz-row [nzGutter]="24" class="page-info-box">
                        <div nz-col nzXs="10" nzLg="4" class="page-info-txt">投保城市：</div>
                        <div nz-col nzXs="14" nzLg="20" class="page-info-txt">{{data.city}}</div>
                    </div>
                    <div nz-row [nzGutter]="24" class="page-info-box">
                        <div nz-col nzXs="10" nzLg="4" class="page-info-txt">投保公司：</div>
                        <div nz-col nzXs="14" nzLg="20" class="page-info-txt">{{data.companyName}}</div>
                    </div>
                </div>
            </div>

            <div nz-row [hidden]="data.bi.length == 0 && data.biAdd.length == 0 && data.biSpecial.length == 0">
                <div nz-col [nzSpan]="24" class="page-table-title">商业险</div>
                <div nz-col [nzSpan]="24" class="page-table-time" *ngIf="data.businessType == 1">生效时间 {{data.biStartTime}}</div>

                <div nz-col nzXs="24" nzLg="16" class="page-table-box">
                    <div nz-row [hidden]="data.bi.length == 0">
                        <div nz-col [nzSpan]="24" class="page-table-small">主险</div>
                        <div nz-col [nzSpan]="24" class="page-table">
                            <div 
                                class="page-table-item"
                                *ngFor="let item of data.bi;let key = index;"
                            >
                                <div nz-row class="th">
                                    <div nz-col [nzSpan]="12">{{item.label}}</div>
                                    <div nz-col [nzSpan]="12">保费：{{item.price}}</div>
                                </div>
                                <div nz-row class="td">
                                    <div nz-col [nzSpan]="12">保额</div>
                                    <div nz-col [nzSpan]="12">{{item.money}}</div>
                                </div>
                                <div nz-row class="td">
                                    <div nz-col [nzSpan]="12">绝对免赔</div>
                                    <div nz-col [nzSpan]="12">{{item.mp || '0.0%'}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div nz-row [hidden]="data.biAdd.length == 0">
                        <div nz-col [nzSpan]="24" class="page-table-small">附加险</div>
                        <div nz-col [nzSpan]="24" class="page-table">
                            <div 
                                class="page-table-item"
                                *ngFor="let item of data.biAdd;let key = index;"
                            >
                                <div nz-row class="th">
                                    <div nz-col [nzSpan]="12">{{item.label}}</div>
                                    <div nz-col [nzSpan]="12">保费：{{item.price}}</div>
                                </div>
                                <div nz-row class="td">
                                    <div nz-col [nzSpan]="12">保额</div>
                                    <div nz-col [nzSpan]="12">{{item.money}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div nz-row [hidden]="data.biSpecial.length == 0">
                        <div nz-col [nzSpan]="24" class="page-table-small">特约条款</div>
                        <div nz-col [nzSpan]="24" class="page-table">
                            <div 
                                class="page-table-item"
                                *ngFor="let item of data.biSpecial;let key = index;"
                            >
                                <div nz-row class="th">
                                    <div nz-col [nzSpan]="12">{{item.label}}</div>
                                    <div nz-col [nzSpan]="12">保费：{{item.price}}</div>
                                </div>
                                <div nz-row class="td">
                                    <div nz-col [nzSpan]="12">次数</div>
                                    <div nz-col [nzSpan]="12">{{item.money}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div nz-row [hidden]="data.ci.length == 0">
                <div nz-col [nzSpan]="24" class="page-table-title">交强险</div>
                <div nz-col [nzSpan]="24" class="page-table-time" *ngIf="data.businessType == 1">生效时间 {{data.ciStartTime}}</div>

                <div nz-col nzXs="24" nzLg="16" class="page-table-box">
                    <div nz-row>
                        <div nz-col [nzSpan]="24" class="page-table">
                            <div 
                                class="page-table-item"
                                *ngFor="let item of data.ci;let key = index;"
                            >
                                <div nz-row class="th">
                                    <div nz-col [nzSpan]="12">{{item.label}}</div>
                                    <div nz-col [nzSpan]="12">保费：{{item.price}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div nz-col nzXs="24" nzLg="6" [nzOffset]="data.nzOffset" class="page-layout-content--right">
            <div nz-row [nzGutter]="[24, 30]">
                <div nz-col [nzSpan]="24">
                    <div nz-row>
                        <div nz-col [nzSpan]="24" class="page-title">保单合计</div>
                        <div nz-col [nzSpan]="24">
                            <div nz-row class="page-total-item">
                                <div nz-col [nzSpan]="12">商业险</div>
                                <div nz-col [nzSpan]="12">￥{{data.biMoney}}</div>
                            </div>
                            <div nz-row class="page-total-item">
                                <div nz-col [nzSpan]="12">交强险</div>
                                <div nz-col [nzSpan]="12">￥{{data.ciMoney}}</div>
                            </div>
                            <div nz-row class="page-total-price">
                                <div nz-col [nzSpan]="12">总保费</div>
                                <div nz-col [nzSpan]="12">￥{{data.salePremium}}/年</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div nz-col [nzSpan]="24">
                    <app-page-bottom 
                        [home]="this"
                        [label1]="data.pageBottomBtn1Label"
                        [run1]="onBtn1"
                        [btn1Disabled]="data.pageBottomBtn1Disabled"
                        [btn1Hidden]="true"
                        [label2]="data.pageBottomBtn2Label"
                        [run2]="onBtn2"
                        [hasExplain]="data.hasExplain"
                        [explainTxt]="data.explainTxt"
                        [hasClause]="data.hasClause"
                        [(clauseChecked)]="data.clauseChecked"
                    >
                    </app-page-bottom>
                </div>
            </div>
        </div>
    </div>
    
</div>

<nz-modal 
    [(nzVisible)]="data.historyModalVisible"
    nzClassName="tesla-modal"
    nzTitle=""
    nzFooter="null"
    (nzOnCancel)="onCloseHistoryModal()"
>
    <app-history-list
        #appHistoryList
        class="history-list"
        [home]="this"
        [list]="data.historyList"
        [run]="onSelectHistory"
    ></app-history-list>
</nz-modal>